<?xml version="1.0" encoding="utf-8"?>
  <chapter id="developers">
    <title>Developers</title>

    <para>
     All relevant information can be found in the
     <ulink url="http://freeguide-tv.sourceforge.net/dev">Developers
         wiki</ulink>.
    </para>
<!--
The contents of this section should be in the developers wiki now

    <para>FreeGuide itself is written entirely in Java (1.4 required), but it
    uses the XMLTV tools (XMLTV is a separate project) which are written in
    Perl.</para>

    <para>The releases are built using Apache's superb <ulink
    url="http://jakarta.apache.org/ant/">Ant</ulink> build tool. In fact, I
    use the <ulink
    url="http://plugins.jedit.org/plugins/AntFarm">AntFarm</ulink> plugin in
    <ulink url="http://www.jedit.org/">JEdit</ulink>, but this isn't
    necessary.</para>

    <para>All the code is formatted using <ulink
    url="http://jalopy.sourceforge.net/">Jalopy</ulink> before being committed
    to CVS to ensure consistency of style.</para>

    <section id="developers.patches">
      <title>Patches</title>

      <para>I (Andy Balaam) am open to contributions from anyone and I expect
      to accept most patches I receive, except ones that differ radically from
      my stated aim of creating a nice, simple TV guide.</para>

      <para>If you're wondering what to contribute, the future plans of the
      developers are stored in the <ulink url="TODO">TODO</ulink> file. The
      latest version of this <ulink
      url="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/freeguide-tv/freeguide-tv/doc/TODO?rev=HEAD&amp;content-type=text/plain">from
      CVS is here</ulink>.</para>
    </section>

    <section id="developers.translation">
      <title>Translation</title>

      <para>Since version 0.9, FreeGuide has been internationalised using
      properties files stored in the <filename>src/resources</filename>
      section of the source tarball.</para>

      <para>To correct a translation, simply edit the files whose names
      correspond to your language (and country if applicable) and send the
      modified versions (or a patch if you know how to make one) to the
      developers' mailing list, <ulink
      url="mailto:freeguide-tv-devel@lists.sourceforge.net">freeguide-tv-devel@lists.sourceforge.net</ulink>.</para>

      <para>If you want to make a new translation, you need to make 2 new
      files in <filename>src/resources</filename>:
      <filename>MessagesBundle_ln_CT.properties</filename> and
      <filename>PrivacyBundle_ln_CT.properties</filename>, where
      "<literal>ln</literal>" is your language code, and
      "<literal>CT</literal>" is your country code (the country code may be
      omitted if it's not needed). These files should be copies of
      <filename>MessagesBundle.properties</filename> and
      <filename>PrivacyBundle.properties</filename> respectively, with the
      strings on the right of the equals signs translated
      appropriately.</para>

      <para>To test your translation, follow the instructions on <link
      linkend="developers.compiling">compiling FreeGuide</link>.</para>
    </section>

    <section id="developers.cvs">
      <title>Getting the latest source: CVS</title>

      <para>To work with the very latest version of FreeGuide you'll need to
      check it out from CVS. Do a checkout by typing these two commands in a
      terminal:</para>

      <programlisting>cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/freeguide-tv login</programlisting>

      <para>[Press RETURN at password prompt]</para>

      <programlisting>cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/freeguide-tv co freeguide-tv</programlisting>

      <para>If you're one of the FreeGuide developers you can do it with a
      single command:</para>

      <programlisting>cvs -z3 -d:ext:user_name@cvs.sourceforge.net:/cvsroot/freeguide-tv co freeguide-tv</programlisting>

      <para>(Where user_name is your sourceforge user name.)</para>

      <para>The above commands check out the default ("HEAD") branch of
      FreeGuide, but sometimes various other branches exist. If you need to
      check out a different branch, add "<parameter>-r
      branch_name</parameter>" between "<parameter>co</parameter>" and
      "<parameter>freeguide-tv</parameter>". For example:</para>

      <programlisting>cvs -z3 -d:ext:user_name@cvs.sourceforge.net:/cvsroot/freeguide-tv co -r Stable0_8-branch freeguide-tv</programlisting>

      <para>would check out the stable branches of FreeGuide based on the 0.8
      release, rather than the latest code stored in HEAD.</para>

      <para>When you've checked out the code from CVS, you need to download
      the latest XMLTV windows binary and source code packages from
      Sourceforge.</para>

      <para>(Assuming you checked out the sources into
      <filename>~/freeguide-tv/</filename>)</para>

      <para>Place the source file <filename>xmltv-x.x.x.tar.bz2</filename>
      into <filename>~/freeguide-tv/xmltv/</filename>.</para>

      <para>Unzip the Windows binary file
      <filename>xmltv-x.x.x-win32.zip</filename> to a temporary file and copy
      the file <filename>xmltv.exe</filename> to
      <filename>~/freeguide-tv/xmltv/</filename>.</para>
    </section>

    <section id="developers.compiling">
      <title>Compiling the program</title>

      <para>We assume that you <link linkend="developers.cvs">checked out from CVS</link>
      or <link linkend="downinst.linux">loaded the source
      tarball</link>.</para>

      <para>You should now be able to build the source tarballs and the
      Windows and Linux jars using Ant like so:</para>

      <programlisting>cd ~/freeguide-tv
ant</programlisting>

      <para>To build the Linux RPM, cd into
      <filename>freeguide-tv/src/install/linux</filename> and modify the file
      <filename>buildrpm</filename> to use your own home directory instead of
      <filename>/home/andy</filename>. Now running that file with
      <filename>./buildrpm</filename> should build the entire project and
      create the <filename>noarch</filename> and <filename>src</filename> RPMs
      in <filename>freeguide-tv/installers</filename>. The RPM spec file is in
      <filename>freeguide-tv/src/install/linux/freeguide-tv.spec</filename>.</para>

      <para>To build the Windows installer you need NSIS from here: <ulink
      url="http://nsis.sourceforge.net/">http://nsis.sourceforge.net/</ulink>.
      Install NSIS v2 and right-click on the file
      <filename>freeguide-tv/src/install/windows/freeguide-tv.nsi</filename>.
      That should build the Windows EXE installer in
      <filename>freeguide-tv/installers</filename>.</para>
    </section>

    <section id="developers.designdocument">
      <title>Design document</title>

      <para>This is a collection of thoughts about FreeGuide's design.
      Contributions, disagreements and comments are <ulink
      url="mailto:freeguide-tv-devel@lists.sourceforge.net">welcome</ulink>.</para>

      <section id="developers.designdocument.targetaudience">
        <title>Target Audience</title>

        <para>A TV guide is a very simple thing. In fact, my main reason for
        writing this application is that TV listings magazines are far, far
        too complicated for their purposes. This is brought about partly by
        the number of adverts and inane articles they contain, and partly
        because they try to list all the programmes everyone wants to see.
        FreeGuide attacks this problem on three fronts. First, it only shows
        the channels you ask for, second, it highlights programmes you are
        likely to want to watch, and third, it lets you produce a guide
        containing only relevant information.</para>

        <para>So I want FreeGuide to be a simple thing to use. That means that
        any advanced configuration and so on should be in a place where the
        average user won't find it.</para>
      </section>

      <section id="developers.designdocument.exampleusers">
        <title>Example Users</title>

        <section>
          <title>Newbie</title>

          <para>My Mum has got the hang of Outlook Express, and uses MS Word
          slightly tentatively. She should find it simple to use FreeGuide.
          Why not, it's hardly rocket science, is it?</para>
        </section>

        <section>
          <title>Hacker</title>

          <para>FreeGuide is listed on Sourceforge, and therefore is likely to
          get a lot of its initial audience from people who really know what
          they're doing. They should be able to do advanced things like grab
          listings from a different web site, and search programmes powerfully
          using clever techniques. However, these abilities should sail past
          the basic user without being noticed. Otherwise we disguise the
          fundamental fact that listing TV programmes is simple.</para>

          <para>It's worth noting that the hacker who just wants to get the TV
          listings quickly without learning anything will appreciate
          simplicity just as much as the newbie.</para>
        </section>
      </section>

      <section id="developers.designdocument.tasks">
        <title>Tasks</title>

        <para>In order of frequency of use.</para>

        <section>
          <title>Viewing listings</title>

          <para>The primary use of FreeGuide is expected to be to look at
          what's on today, and print off a customised guide. It should also be
          easy to have a look at what's on tomorrow, and the rest of the
          week.</para>
        </section>

        <section>
          <title>Downloading listings</title>

          <para>Every week or so the user will need to download new listings,
          by connecting to the Internet. This should be almost completely
          non-interactive, without taking away the user's freedom.</para>
        </section>

        <section>
          <title>Downloading channels</title>

          <para>The user will probably only do this once, but it will be the
          first thing they ever have to do with FreeGuide, so it must be easy,
          friendly and non-interactive, again not taking away the user's
          freedom, particularly because they have to connect to the Internet
          before they begin.</para>

          <para>Of course, the user will encounter these tasks in this order:
          downloading channels, downloading listings, then viewing
          listings.</para>
        </section>
      </section>

      <section id="developers.designdocument.progress">
        <title>Progress so far</title>

        <section id="developers.designdocument.progress.0.8">
          <title>0.8</title>

          <para>Again a step forward since FreeGuide is now installed using
          the normal installation mechanism for each platform, which means
          users don't need to learn a new way of installing just to use
          FreeGuide.</para>
        </section>

        <section id="developers.designdocument.progress.0.7">
          <title>0.7</title>

          <para>This release sees a large step forward with the addition of a
          GUI for grabber configuration, which means users don't have to open
          a DOS or Cmd window to install the program. This opens it up to a
          massive potential user base who would have been scared off
          before.</para>

          <para>This release and the preceeding 0.6.x ones are beginning to
          see FreeGuide maturing, as useful features and bugfixes are being
          picked off one by one, gradually improving the consistency and ease
          of use of the interface.</para>
        </section>

        <section id="developers.designdocument.progress.0.6">
          <title>0.6</title>

          <para>Still missing GUI grabber configuration, but some nice
          features added - a heart to make clear exactly which programmes are
          favourites, and an added entry to the channel sets dropdown that
          lets you edit the channel sets from there (this should help people
          understand what this dropdown is for). Other nice stuff: progress
          bar and picture on the Please Wait screen, and progress bar on the
          downloader.</para>
        </section>

        <section id="developers.designdocument.progress.0.5">
          <title>0.5</title>

          <para>The major change here is that lots of new grabbers (for
          different countries) are supported, which is not totally UI-related,
          but nice nonetheless. UI changes in the form of a
          dynamically-updated list of available dates slightly enhance the
          user experience, and better handling of missing data makes things
          make a little more sense. The biggest missing element is a GUI for
          doing the configuration of the grabber.</para>
        </section>

        <section id="developers.designdocument.progress.0.4.3">
          <title>0.4.3</title>

          <para>Minor tweaks including remembering where you left the window
          last time you were using it, which can really improve the user
          experience, actually.</para>
        </section>

        <section id="developers.designdocument.progress.0.4.2">
          <title>0.4.2</title>

          <para>The installer in this version is a bit better (and there's an
          uninstall option), but otherwise it's fairly similar. Oh yes, I
          added a "Please Wait" screen to let the user know when it's loading.
          There are a few GUI improvements that make it a tiny bit easier to
          understand. Of course, fixing bugs always improves everyone's
          experiences.</para>
        </section>

        <section id="developers.designdocument.progress.0.4">
          <title>0.4</title>

          <para>Big steps forward here with a simple installer for each
          platform and region, which takes almost all of the interesting
          configuration problems away.</para>

          <para>However, there is still much room for improvement. The user
          still has to run the configuration step of the grabber from a
          command line, which is decidedly unfriendly, and windows users have
          to set up the timezone info as well.</para>

          <para>Linux users have still got it very tough with all the problems
          of installing XMLTV. We will just have to wait until the XMLTV
          project solves these problems. However, I feel I can expect Linux
          people to be much more clued-up than Windows people, so I'm not too
          worried about this.</para>

          <para>Windows installation has become extremely easy (relative to
          previous releases) because the required XMLTV tools and Perl runtime
          are included in the jar file they download. Of course, they still
          have to download Java 1.4 first, but there's not a lot I can do
          about that in the immediate future.</para>
        </section>

        <section id="developers.designdocument.progress.0.3">
          <title>0.3</title>

          <para>0.3 still has a long way to go if it's going to be usable by
          the "my Mum" category of users, but it does have some improvements.
          For example, it notices when there are no listings and asks whether
          you want to go and download more. A lot of the wording has been made
          clearer, and the tick-boxes have been replaced with clickable
          programmes.</para>

          <para>The UI generally has been improved, and makes it clearer (I
          think) what everything is for, and what you might like to do.</para>

          <para>The major problem at the moment is installation. Java 1.4's
          Preferences features mean that a configuration file is no longer a
          problem, but I've made it very difficult for myself by using
          external tools through a command-line interface - this causes any
          number of problems, and there is still no decent installer which
          would sort some of these out.</para>

          <para>When XMLTV gets a little maturer, and settles on an
          installation method (especially on Windows), then FreeGuide should
          follow and become easier on this front. The necessity of running the
          grabber configuration puts FreeGuide well out of reach of loads of
          users at the moment. I really don't know what to do about this - to
          wrap configuration with a GUI the XMLTV tools will need to have a
          consistent interface, which is difficult as different grabbers have
          different requirements.</para>

          <para>Hackers are quite well served by 0.3, as the ability to have
          favourites selected using regular expressions has been added, thanks
          to Sun finally adding regexp support to Java. In fact loads of great
          things come from requiring Java 1.4 - you get XML parsing without an
          external library, the fantastic Preferences stuff, and regular
          expressions. And because this is an open source project, I can just
          decide that I want to require Java 1.4, and no-one can argue!</para>
        </section>

        <section id="developers.designdocument.progress.0.2">
          <title>0.2</title>

          <para>0.2 retreats slightly from my most strict ease of use
          requirements, as an acknowledgement that most users will be experts,
          mainly because it only works under Linux. It provides lots of
          unnecessary feedback from its downloading operations, because it is
          expected to encounter problems that I would like the user to be
          aware of and report to me. It also expects you to go to Tools and
          then Options just to download the listings the first time you use
          it, which is basically a mistake in the design brought about by a
          complicated system of checking whether it needs to jump you to here
          or there got a bit annoying and I took it out.</para>

          <para>Hiding Download listings and Options (which allows you to
          download channels) away in the Tools menu is bad, but it if jumped
          to the right place automatically when needed, that might be
          appropriate as the normal user wouldn't need to know where they
          were.</para>

          <para>Installation at the moment is fiddly, because you have to
          alter the config file manually, and I shall work on installers when
          there is time. This isn't a priority at the moment, because there
          are plenty of bugs to fix and basic UI stuff to be done.</para>

          <para>The user doesn't get much feedback that the program is doing
          something sometimes - the current window disappears, and it can take
          a while for a new one to appear.</para>
        </section>

        <section id="developers.designdocument.progress.0.1">
          <title>0.1</title>

          <para>Version 0.1 didn't really work because I had to withdraw the
          listings grabber, so it didn't satisfy many of the users'
          requirements.</para>
        </section>
      </section>
    </section>
-->
  </chapter>