<?xml version="1.0" encoding="utf-8"?>
  <chapter id="downinst">
    <title>Download and Install</title>

    <para>Before downloading, installing and finally using FreeGuide, you
    should make sure you already have some required software installed: Java
    and XMLTV. The installation instructions here tell you how you get all of
    this done.</para>

    <section id="downinst.windows">
      <title>Windows</title>

      <para>Go to the <ulink
      url="http://sourceforge.net/project/showfiles.php?group_id=35309">sourceforge
      download page</ulink> and pick the file like this:
      "<filename>freeguide-x.x.x-with-xmltv-win32.exe</filename>" with the highest
      version number to get the windows installer.</para>
      <para>NOTE: you almost certainly want the "with-xmltv" version, unless you
      know you don't need XMLTV.</para>

      <para>The only thing you need to do after downloading the file is
      double-clicking on the <filename>.exe</filename> file and following the
      installation instructions. After the installation, you will find a
      FreeGuide icon in your start menu.</para>

      <section id="downinst.windows.config">
        <title>Configuring your System</title>
        
        <para>As soon as it's installed, FreeGuide should be ready to go,
        unless you are behind a firewall or proxy server.</para>
        
        <!-- Time zone is not needed by XMLTV any more.
        <section id="downinst.windows.timezone">
          <title>Timezone</title>

          <section>
            <title>With Windows 2000/XP</title>

            <itemizedlist>
              <listitem>
                <para>Right Click "<guilabel>My Computer</guilabel>" -&gt;
                <guimenuitem>Properties</guimenuitem></para>
              </listitem>

              <listitem>
                <para>Choose the <guibutton>Advanced</guibutton> Tab and click
                the <guibutton>Environment Variables</guibutton> button at the
                bottom middle of the window.</para>
              </listitem>

              <listitem>
                <para>Click the "<guibutton>New</guibutton>" button in the
                <guilabel>Global Variables</guilabel> section.</para>
              </listitem>

              <listitem>
                <para>Variable Name: <varname>TZ</varname></para>
              </listitem>

              <listitem>
                <para>Variable Value: <literal>EST5EDT</literal></para>
              </listitem>

              <listitem>
                <para>Click <guibutton>OK</guibutton></para>
              </listitem>

              <listitem>
                <para>Click <guibutton>OK</guibutton></para>
              </listitem>
            </itemizedlist>
          </section>

          <section>
            <title>With Windows 95/98/ME</title>

            <itemizedlist>
              <listitem>
                <para>Add a line <programlisting>set TZ=EST5EDT</programlisting>to
                the file <filename>c:\autoexec.bat</filename></para>
              </listitem>

              <listitem>
                <para><guibutton>Restart</guibutton> your computer</para>
              </listitem>
            </itemizedlist>
          </section>
        </section>-->

        <section id="downinst.windows.proxy">
          <title>Proxy</title>

          <para>If you have a proxy server or are behind a firewall, you will
          need to follow the instructions below to allow FreeGuide to see
          past them to the Internet.</para>
          
          <para>In the following replace "<uri>proxy.uni.ac.uk</uri>" with
          your proxy server address, and "<parameter>8080</parameter>" with
          the port it uses. On Windows you can find these out from the
          "<guimenu>Tools</guimenu>" menu on Internet Explorer by choosing
          "<guimenuitem>Options</guimenuitem>", going to the
          "<guibutton>Connections</guibutton>" tab and clicking
          "<guibutton>LAN Settings</guibutton>":</para>

          <section>
            <title>With Windows 2000/XP</title>

            <para>Right Click "<guilabel>My Computer</guilabel>" -&gt;
            <guimenuitem>Properties</guimenuitem> Choose the
            <guibutton>Advanced</guibutton> Tab and click the
            <guibutton>Environment Variables</guibutton> button at the bottom
            middle of the window. Click the "<guibutton>New</guibutton>"
            button in the <guilabel>Global Variables</guilabel> section.
            Variable Name: <varname>http_proxy</varname> Variable Value:
            <returnvalue>http://proxy.uni.ac.uk:8080</returnvalue> Click
            <guibutton>OK</guibutton> Click <guibutton>OK</guibutton></para>
          </section>

          <section>
            <title>With Windows 95/98/ME</title>

            <para>Add a line "<code>set
            http_proxy=http://proxy.uni.ac.uk:8080</code>" to the file
            <filename>C:\Autoexec.bat</filename></para>

            <para><guibutton>Restart</guibutton> your computer.</para>
          </section>
        </section>

        <section>
          <title>Channel icons</title>

          <para>In order to make channel icons download ok, you will need to
          add some stuff to the shortcut you use to launch FreeGuide.
          Right-click on the shortcut and choose Properties.</para>

          <para>Now change the command to read like this:</para>

          <para><command>javaw.exe -DproxySet=true -DproxyHost=proxy.uni.ac.uk
          -DproxyPort=8080 -jar "C:\Program Files\FreeGuide\startup.jar"
          --doc_directory "C:\Program Files\FreeGuide\doc" --install_directory
          "C:\Program Files\FreeGuide\"</command></para>
        </section>
      </section>
    </section>

    <section id="downinst.linux">
      <title>Linux</title>

      <para>To use FreeGuide on Linux you need Java and XMLTV.</para>

      <para>The <ulink url="http://java.sun.com/getjava/">Java 2 Runtime
      Environment</ulink> version 1.4 or above: You can check this by typing
      <command>java -version</command> in a terminal. (If you've installed the
      new version of Java but "<command>java -version</command>" still says
      the old one, you need to look at putting the new version of java in your
      <varname>PATH</varname>.</para>

      <section id="downinst.linux.xmltv">
        <title>Installing XMLTV</title>

        <para>For Linux, you need to install the latest version of
        XMLTV.</para>

        <para>You can find RPMs for RedHat and Fedora at <ulink
        url="http://atrpms.physik.fu-berlin.de/name/xmltv/">http://atrpms.physik.fu-berlin.de/name/xmltv/</ulink>
        and if you run Debian you can find xmltv in
        <emphasis>unstable</emphasis>.</para>
		
		<para>On Ubuntu, install the xmltv-gui package from the universe repository.</para>
		
		<para>On Debian, install the xmltv-gui package.</para>

        <para>To install from source (which can be tricky due to the large
        number of prerequisites) download the <ulink
        url="http://sourceforge.net/project/showfiles.php?group_id=39046&amp;package_id=31217">latest
        version</ulink> plus the <ulink
        url="http://sourceforge.net/project/showfiles.php?group_id=39046&amp;package_id=91929">prerequisites</ulink>.</para>

        <para>Install from source in the usual way with "<command>perl
        Makefile.PL &amp;&amp; make &amp;&amp; make install</command>".</para>
<!--
    Configuration is commented out on Andy's request
    as FreeGuide can do that

        <para>After installing XMLTV, you need to configure it. Connect to the
        Internet before doing this. If you like, you can simply run the
        FreeGuide installation (see below) and the grabber will be configured
        within that. If you would like to do it manually, type (at a command
        prompt):</para>

        <programlisting>tv_grab_</programlisting>

        <para>and then press TAB a couple of times. You should see a list of
        the possible commands. You want the one for your country: e.g. "na_dd"
        for North America, "uk_bleb" for UK, "dk" for Denmark. Continue typing
        the command by adding the correct completion, and then a space, and
        then - -configure. So the full command should look like this:</para>

        <programlisting>tv_grab_fi - -configure</programlisting>

        <para>(Except with "<varname>fi</varname>" relaced with the correct
        country code.)</para>

        <para>Now press return and follow the instructions to configure your
        grabber.</para>
-->
        <para>Continue with your distribution:</para>

        <itemizedlist>
          <listitem>
            <para><link linkend="downinst.linux.rpm">RPM-based distributions
            (RedHat/Fedora, Mandrake, SuSE)</link></para>
          </listitem>

          <listitem>
            <para><link linkend="downinst.linux.debian">Debian and
            Ubuntu</link></para>
          </listitem>

          <listitem>
            <para><link linkend="downinst.linux.gentoo">Gentoo</link></para>
          </listitem>

          <!--listitem>
            <para><link linkend="downinst.linux.tarball">Others - Tarball
            installation</link></para>
          </listitem-->
        </itemizedlist>
      </section>

      <section id="downinst.linux.rpm">
        <title>FreeGuide on RPM-based distributions (RedHat/Fedora, Mandrake,
        SuSE)</title>

        <para>Go to the <ulink
        url="http://sourceforge.net/project/showfiles.php?group_id=35309">sourceforge
        download page</ulink>, download the
        <filename>FreeGuide-xx-noarch.rpm</filename> RPM file and install it
        like so:</para>

        <programlisting>su -c "rpm -i FreeGuide-xx-noarch.rpm". </programlisting>

        <para>This will install FreeGuide and put a shortcut to it in the
        menu.</para>

        <para>You can now run FreeGuide by choosing it from the menu (in
        RedHat it's under "<guimenu>Accessories</guimenu>" or
        "<guimenuitem>Other</guimenuitem>") or alternatively by typing:</para>

        <programlisting>java -jar /usr/share/freeguide/startup.jar</programlisting>

        <para>You'll now need to answer a few questions, and then you're ready
        to go.</para>

        <para>Now <link linkend="downinst.linux.config">configure your
        system</link>.</para>
      </section>

      <section id="downinst.linux.debian">
        <title>FreeGuide on Debian and Ubuntu</title>

        <para>There are Debian packages available from <ulink
        url="http://packages.debian.org/freeguide">http://packages.debian.org/freeguide</ulink>.</para>
<!--
        <para>FIXME</para>
-->
        <para>Now <link linkend="downinst.linux.config">configure your
        system</link>.</para>
      </section>

      <section id="downinst.linux.gentoo">
        <title>FreeGuide on Gentoo</title>

        <para>FreeGuide isn't officially supported by Gentoo, but there are
        ebuilds which can be installed manually.</para>

        <para>First, go to the <ulink
        url="http://sourceforge.net/project/showfiles.php?group_id=35309">sourceforge
        download page</ulink> and download the
        <filename>freeguide_gentoo_ebuilds_x.y.z.tar.bz2</filename>
        file.</para>

        <para>Second: Follow the instructions on <ulink
        url="http://gentoo-wiki.com/HOWTO_Installing_3rd_Party_Ebuilds">Gentoo
        Wiki: Installing 3rdParty ebuilds</ulink>.</para>

        <para>After you have set up your local portage overlay dir, extract
        the freeguide ebuild file into the directory and do a</para>

        <programlisting>ACCEPT_KEYWORDS="~x86" emerge install freeguide</programlisting>

        <para>There are several freeguide packages in portage, but "freeguide"
        alone installs the most necessary ones. If you need another grabber or
        other plugins, type</para>

        <programlisting>emerge search freeguide</programlisting>

        <para>and choose the right ones for you.</para>

        <para>Now <link linkend="downinst.linux.config">configure your
        system</link>.</para>
      </section>
<!--
      <section id="downinst.linux.tarball">
        <title>FreeGuide on other distros - Tarball installation</title>

        <para>FIXME</para>

        <para>Now <link linkend="downinst.linux.config">configure your
        system</link>.</para>
      </section>
-->
      <section id="downinst.linux.config">
        <title>Configuring your System</title>

        <!--<section id="downinst.linux.config.timezone">
          <title>Timezone</title>

          <para>Before you use FreeGuide you need to set your environment
          variable "<varname>TZ</varname>" to your time zone.
          ("<literal>EST5EDT</literal>" refers to New York timezone, so you'll
          need to adjust it, e.g to "<literal>GMT</literal>" for London. For a
          complete list of timezones, have a look at the <ulink
          url="http://en.wikipedia.org/wiki/Time_zone">Wikipedia Timezone
          article</ulink>)</para>

          <para>Add a line <programlisting>export TZ=EST5EDT</programlisting>to
          the file <filename>~/.bash_profile</filename>.</para>
        </section>-->

        <section id="downinst.linux.config.proxy">
          <title>Proxy</title>
          
          <para>If you have a proxy server or are behind a firewall, you may
          need to follow the instructions below to allow FreeGuide to see
          past them to the Internet.</para>
          
          <para>Add 2 lines to the file
          <filename>~/.bash_profile</filename>:</para>

          <programlisting><code>export http_proxy=http://proxy.uni.ac.uk:8080
export FREEGUIDE_OPTS=-DproxySet=true -DproxyHost=http://proxy.uni.ac.uk -DproxyPort=8080</code></programlisting>

          <para>Replace "<uri>proxy.uni.ac.uk</uri>" with your proxy server
          address, and "<parameter>8080</parameter>" with the port it
          uses.</para>
        </section>
      </section>
    </section>
<!--
    <section id="downinst.macos">
      <title>Mac OS</title>

      <para>FIXME</para>
    </section>

    <section id="downinst.freebsd">
      <title>FreeBSD</title>

      <para>FIXME</para>
    </section>

    <section id="downinst.otheros">
      <title>Other operating systems</title>

      <para>FIXME</para>
    </section>
-->
  </chapter>
