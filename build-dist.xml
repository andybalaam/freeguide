<?xml version="1.0"?>

<project name="freeguide-tv-dist">
    
    <target name="dist-init">
        <mkdir dir="${dist}"/>
        <mkdir dir="${dist-repo}"/>
        <mkdir dir="${dist-rpm}"/>
    </target>
    
    <target name="dist-repository" depends="build-all, dist-init">
        
        <zip destfile="${dist-repo}/package-freeguide-0.10.2.zip" 
    		basedir="build/" 
    		includes="startup.jar, lib/freeguide.jar, lib/common.jar, lib/AJavaLib.jar, lib/tagsoup-1.0.rc3, doc/"/>
        
        <antcall target="all-plugins">
            <param name="actual-target" value="dist-repository-one-plugin"/>
        </antcall>
        
    </target>
    
    <target name="dist-repository-one-plugin">
    	<zip destfile="${dist-repo}/package-${plugin-name}-${plugin-version}.zip" 
    		basedir="build/" 
    		includes="lib/${plugin-name}.jar"/>
	</target>
    
    <target name="dist-rpm-init" depends="build-all, dist-init">
        <antcall target="all-plugins"><param name="actual-target" value="dist-rpm-make-plugin-spec"/></antcall>
    </target>
    
    <target name="dist-rpm" depends="dist-rpm-init">
        <!-- TODO: either call the rpmbuild script from here, or use the ant rpm task -->
    </target>
    
    <target name="dist-clean">
        <delete dir="${dist-repo}" />
        <delete dir="${dist-rpm}" />
    </target>
    
</project>

