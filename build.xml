<?xml version="1.0"?>

<!--

  Main build file with meta tasks.
  Used tasks:

    all: prepare, source-all, build-all, dist-tgz
      prepare           - compile helper classes and apply versions and names from plugin.xml's to all files.
      source-all        - pack all sources to .zip and .tar.gz formats.
      build-all         - compile application and all plugins to jars.
      dist-tgz          - make .tar.gz files for slackware and other unpackaged linuxes

      (currently unused)
      dist-repository   - make .zip files for repository

  After builds we have:
    dist/src        - sources
    dist/repository - zip files for repository
    dist/rpm        - rpm files
    
    
    For build project you just need to run "ant clean", then "ant".
      After that you can run :
        dist-exe  - package to .exe
        dist-rpm  - package to .rpm
        
    For create other-xmltv-win32-exe plugin, you need to put xmltv.exe into
      "src/plugins/other-xmltv-win32-exe/files-nosrc/xmltv" directory.
-->

<project name="freeguide-tv" default="all" basedir=".">

    <!-- set global properties for this build -->
    <property name="src"        location="src"                />
    <property name="resources"  location="${src}/resources"   />
    <property name="doc"        location="doc"                />
    <property name="lib"        location="lib"                />
    <property name="xmltv"      location="xmltv"              />
    <property name="share"      location="xmltv/share"        />
    <property name="build"      location="build"              />
    <property name="dist"       location="dist"               />
    <property name="dist-src"   location="${dist}/src"        />
    <property name="dist-repo"  location="${dist}/repository" />
    <property name="dist-rpm"   location="${dist}/rpm"        />
    
    <description>
        Ant build file for FreeGuide.
    </description>
    
    <target name="all" depends="prepare, source-all, build-all, dist-tgz" />
    
    <target name="prepare">
        <ant antfile="ant/build-prebuild.xml" />
    </target>
    <target name="source-all">
        <ant antfile="ant/build-source.xml" />
    </target>
    <target name="build-all">
        <ant antfile="ant/build-build.xml" />
    </target>
    <!--target name="dist-repository">
        <ant antfile="ant/build-dist.xml" target="dist-repository" />
    </target-->
    <target name="dist-tgz">
        <ant antfile="ant/build-dist.xml" target="dist-tgz" />
    </target>

    <target name="clean">
        <delete dir="${build}"/>
        <delete dir="${dist}"/>
    </target>
    
    <target name="install-linux-run">
        <ant antfile="ant/build-install-linux.xml" target="install-linux-run" />
    </target>
    
    <target name="install-linux-allinone">
        <ant antfile="ant/build-install-linux.xml" target="install-linux-allinone" />
    </target>
    <target name="install-linux">
        <ant antfile="ant/build-install-linux.xml" />
    </target>
    <target name="dist-exe">
        <ant antfile="ant/build-dist-exe.xml" />
    </target>
    <target name="dist-rpm">
        <ant antfile="ant/build-dist-rpm.xml" />
    </target>

</project>

