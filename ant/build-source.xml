<?xml version="1.0"?>

<project name="freeguide-tv-source" default="source-all">

    <import file="build-plugins-info.xml"/>

    <target name="source-init">
        <mkdir dir="${dist}" />
        <mkdir dir="${dist-src}" />
    </target>
    
    <target name="source-all" depends="source-init"
        description="generate the source tar.gz and zip">

        <tar longfile="gnu"
            destfile="${dist-src}/${application-id}-${application-version}-src.tar.gz" compression="gzip" >
            <tarfileset dir="${src}" prefix="${application-id}-${application-version}/src">
                <exclude name="**/.xvpics/**" />
                <exclude name="**/*-nosrc/**" />
            </tarfileset>
            <tarfileset dir="${doc}" prefix="${application-id}-${application-version}/doc">
                <exclude name="**/.xvpics/**" />
            </tarfileset>
            <tarfileset dir="." includes="build*.xml"
                prefix="${application-id}-${application-version}" />
            <tarfileset dir="xmltv"
                includes="*"
                excludes=".svn/**"
                prefix="${application-id}-${application-version}/xmltv" />
            <tarfileset dir="stats"
                includes="*.sh,*.py,barchart"
                prefix="${application-id}-${application-version}/stats" />
        </tar>
        <zip zipfile="${dist-src}/${application-id}-${application-version}-src.zip">
            <zipfileset dir="${src}" prefix="${application-id}-${application-version}/src">
                <exclude name="**/.xvpics/**" />
                <exclude name="**/*-nosrc/**" />
            </zipfileset>
            <zipfileset dir="${doc}" prefix="${application-id}-${application-version}/doc">
                <exclude name="**/.xvpics/**" />
            </zipfileset>
            <zipfileset dir="." includes="build*.xml" prefix="${application-id}-${application-version}" />
            <zipfileset dir="xmltv"
                includes="*"
                excludes=".svn/**"
                prefix="${application-id}-${application-version}/xmltv" />
            <zipfileset dir="stats"
                includes="*.sh,*.py,barchart"
                prefix="${application-id}-${application-version}/stats" />
        </zip>
        
    </target>
</project>

